!function r(t,n,e){function u(o,c){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(r){var n=t[o][1][r];return u(n?n:r)},l,l.exports,r,t,n,e)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(r,t,n){var e,u;e=r("./fractions-parser"),u=function(r){var t,n,u,i,o,c,a,s,l;return a=r.output,c=r.onError,t={curr:"",isRes:!1,val:function(r,t){return null==t&&(t=!1),null!=r&&(this.curr=r,this.isRes=t),this.curr},hasResult:function(){return this.isRes}},u=function(r){var n,u,i;return"C"===r?!0:"="===r?(n=t.val(),u=e.parse(n),!u.ast.error&&!(null!=(i=u.ast.incomplete)?i.numbers:void 0)):(n=t.val()+r)?(u=e.parse(n),!u.ast.error):!0},o=function(r){return"C"===r&&t.val(r=""),"="===r?n():(t.hasResult()&&r.match(/\d/)?t.val(r):t.val(t.val()+r),s())},l=function(){var r;return t.hasResult()?i():(r=t.val(),t.val(r.slice(0,-1)),s())},i=function(){return a("")},s=function(){var r,n,u;return r=t.val(),r.trim()?(u=e.parse(r),null!=u.ast.error?l():(null!=u.ast.incomplete&&(n={incomplete:u.ast.incomplete}),a(u.render(),n))):i()},n=function(){var r,n,u,o,s;return r=t.val(),r.trim()?(n=e.parse(r),(null!=(u=n.ast.incomplete)?u.numbers:void 0)>0?void 0:(o=n.render({result:!0}),o.error?c(o.error):(s=n.calc(),a(o,{decimal:s.toFloat()}),t.val(s.toString(),!0)))):i()},i(),{canInput:u,input:o,uninput:l}},t.exports=u},{"./fractions-parser":2}],2:[function(r,t,n){var e,u,i,o,c,a,s,l;i=r("./fractions"),a=r("./fractions-peg-parser"),c=function(r){var t,n;try{return a.parse(r)}catch(n){return t=n,l(r,t)}},l=function(r,t){var n,e,u,i,o,c,s,l;for(s=function(r){var t,n;return n=function(r){if(r.arg){if(r.arg.length)return n("missing"===r.arg[r.arg.length-1].type?r.arg[r.arg.length-2]:r.arg[r.arg.length-1]);if("num"!==r.type)return n(r.arg)}return r},t=n(r),-1===t.arg?(t.type="minus",t.arg={type:"missing"}):(t.type="missing",delete t.arg)},u=r,l=0,i=0,r.match(/[^\d\)\s]+$/)?(u+="1",++i):r.match(/\s\d+$/)?(u+="/1",++l,++i):r.match(/\s$/)&&(u+="1/1",++l,i+=2),o=(r.match(/\(/g)||[]).length,e=(r.match(/\)/g)||[]).length,c=o-e;o-->e;)u+=")";if(r!==u)try{if(n=a.parse(u),c>0||l>0||i>0)for(n.incomplete={},c>0&&(n.incomplete.parens=c),l>0&&(n.incomplete.symbols=l),i>0&&(n.incomplete.numbers=i);i-->0;)s(n);return n}catch(f){}return{error:t.message}},o=function(r,t){var n,e;return r?null!=r.error?t.error(r.error):(n=function(r,t){return null!=r.map?r.map(t):t(r)},e=function(r){return"num"===r.type||"missing"===r.type?t[r.type](r.arg):t[r.type](n(r.arg,e))},t.post(e(r))):null},u=function(r){var t,n,e,u;if(null!=(u=r.incomplete)?u.numbers:void 0)return{error:"incomplete expression"};try{return e=i,o(r,{error:function(){return""},num:function(r){return e.create(r)},add:function(r){return r.reduce(function(r,t){return e.add(r,t)})},minus:function(r){return e.minus(r)},mul:function(r){return r.reduce(function(r,t){return e.mul(r,t)})},div:function(r){return e.reciprocal(r)},mixed:function(r){var t,n,u,i;return u=r.map(function(r){return r.n}),i=u[0],n=u[1],t=u[2],e.mixed(i,n,t)},over:function(r){var t,n,u;return u=r.map(function(r){return r.n}),n=u[0],t=u[1],e.create(n,t)},exp:function(r){return r},post:function(r){return r}})}catch(n){return t=n,{error:t.message}}},s=function(r,t){var n;return n=function(t){var n,e,i,o;return i=u(r),null!=i.error?{error:i.error}:(e=s(c(i.toString())),n=s(c(i.toMixedString())),o=t,t!==e&&(o+=" = "+e),n!==e&&n!==t&&(o+=" = "+n),o)},o(r,{error:function(r){return{error:r}},missing:function(){return""},num:function(r){return""+r},add:function(r){return r.reduce(function(r,t){return r+" + "+t})},minus:function(r){return"-"+r},mul:function(r){return r.reduce(function(r,t){return r+" \\times "+t})},div:function(r){return"\\div "+r},mixed:function(r){var t,n,e;return e=r[0],n=r[1],t=r[2],e+" \\frac{"+(n||"\\circ")+"}{"+(t||"\\circ")+"}"},over:function(r){var t,n;return n=r[0],t=r[1],null!=t?"\\frac{"+n+"}{"+(t||"\\circ")+"}":n},exp:function(r){return"\\left( "+r+" \\right)"},post:function(r){return r=r.replace(/\\times \\div/g,"\\div").replace(/\+(\s)?-/g,"-$1").replace(/-(\s)?-/g,"+$1").replace(/\s{2,}/g," "),(null!=t?t.result:void 0)?n(r):r}})},e=function(){function r(r){this.ast=r}return r.prototype.calc=function(){return u(this.ast)},r.prototype.render=function(r){return s(this.ast,r)},r}(),t.exports={parse:function(r){return new e(c(r))}}},{"./fractions":4,"./fractions-peg-parser":3}],3:[function(r,t,n){t.exports=function(){function r(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function t(r,t,n,e,u,i){this.message=r,this.expected=t,this.found=n,this.offset=e,this.line=u,this.column=i,this.name="SyntaxError"}function n(r){function n(t){function n(t,n,e){var u,i;for(u=n;e>u;u++)i=r.charAt(u),"\n"===i?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return ar!==t&&(ar>t&&(ar=0,sr={line:1,column:1,seenCR:!1}),n(sr,ar,t),ar=t),sr}function e(r){lr>or||(or>lr&&(lr=or,fr=[]),fr.push(r))}function u(e,u,i){function o(r){var t=1;for(r.sort(function(r,t){return r.description<t.description?-1:r.description>t.description?1:0});t<r.length;)r[t-1]===r[t]?r.splice(t,1):t++}function c(r,t){function n(r){function t(r){return r.charCodeAt(0).toString(16).toUpperCase()}return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+t(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+t(r)}).replace(/[\u0180-\u0FFF]/g,function(r){return"\\u0"+t(r)}).replace(/[\u1080-\uFFFF]/g,function(r){return"\\u"+t(r)})}var e,u,i,o=new Array(r.length);for(i=0;i<r.length;i++)o[i]=r[i].description;return e=r.length>1?o.slice(0,-1).join(", ")+" or "+o[r.length-1]:o[0],u=t?'"'+n(t)+'"':"end of input","Expected "+e+" but "+u+" found."}var a=n(i),s=i<r.length?r.charAt(i):null;return null!==u&&o(u),new t(null!==e?e:c(u,s),u,s,i,a.line,a.column)}function i(){var r;return r=o()}function o(){var t,n,u,i,o,a;if(pr++,t=or,n=c(),n!==R){if(u=[],i=or,43===r.charCodeAt(or)?(o=$,or++):(o=R,0===pr&&e(D)),o===R&&(45===r.charCodeAt(or)?(o=J,or++):(o=R,0===pr&&e(_))),o!==R?(a=c(),a!==R?(o=[o,a],i=o):(or=i,i=S)):(or=i,i=S),i!==R)for(;i!==R;)u.push(i),i=or,43===r.charCodeAt(or)?(o=$,or++):(o=R,0===pr&&e(D)),o===R&&(45===r.charCodeAt(or)?(o=J,or++):(o=R,0===pr&&e(_))),o!==R?(a=c(),a!==R?(o=[o,a],i=o):(or=i,i=S)):(or=i,i=S);else u=S;u!==R?(cr=t,n=q(n,u),t=n):(or=t,t=S)}else or=t,t=S;return t===R&&(t=c()),pr--,t===R&&(n=R,0===pr&&e(M)),t}function c(){var t,n,u,i,o,c;if(pr++,t=or,n=a(),n!==R){if(u=[],i=or,42===r.charCodeAt(or)?(o=U,or++):(o=R,0===pr&&e(j)),o===R&&(247===r.charCodeAt(or)?(o=k,or++):(o=R,0===pr&&e(O))),o!==R?(c=a(),c!==R?(o=[o,c],i=o):(or=i,i=S)):(or=i,i=S),i!==R)for(;i!==R;)u.push(i),i=or,42===r.charCodeAt(or)?(o=U,or++):(o=R,0===pr&&e(j)),o===R&&(247===r.charCodeAt(or)?(o=k,or++):(o=R,0===pr&&e(O))),o!==R?(c=a(),c!==R?(o=[o,c],i=o):(or=i,i=S)):(or=i,i=S);else u=S;u!==R?(cr=t,n=H(n,u),t=n):(or=t,t=S)}else or=t,t=S;return t===R&&(t=a()),pr--,t===R&&(n=R,0===pr&&e(I)),t}function a(){var t,n,u,i,o,c;return pr++,t=or,n=l(),n!==R?(47===r.charCodeAt(or)?(u=N,or++):(u=R,0===pr&&e(P)),u!==R?(i=l(),i!==R?(cr=t,n=Q(n,i),t=n):(or=t,t=S)):(or=t,t=S)):(or=t,t=S),t===R&&(t=or,n=l(),n!==R?(32===r.charCodeAt(or)?(u=T,or++):(u=R,0===pr&&e(z)),u!==R?(i=f(),i!==R?(47===r.charCodeAt(or)?(o=N,or++):(o=R,0===pr&&e(P)),o!==R?(c=l(),c!==R?(cr=t,n=B(n,i,c),t=n):(or=t,t=S)):(or=t,t=S)):(or=t,t=S)):(or=t,t=S)):(or=t,t=S),t===R&&(t=s())),pr--,t===R&&(n=R,0===pr&&e(L)),t}function s(){var t,n,u,i,c;return pr++,t=l(),t===R&&(t=or,45===r.charCodeAt(or)?(n=J,or++):(n=R,0===pr&&e(_)),n===R&&(43===r.charCodeAt(or)?(n=$,or++):(n=R,0===pr&&e(D))),n===R&&(n=K),n!==R?(40===r.charCodeAt(or)?(u=V,or++):(u=R,0===pr&&e(W)),u!==R?(i=o(),i!==R?(41===r.charCodeAt(or)?(c=X,or++):(c=R,0===pr&&e(Y)),c!==R?(cr=t,n=Z(n,i),t=n):(or=t,t=S)):(or=t,t=S)):(or=t,t=S)):(or=t,t=S)),pr--,t===R&&(n=R,0===pr&&e(G)),t}function l(){var t,n,u;return pr++,t=or,45===r.charCodeAt(or)?(n=J,or++):(n=R,0===pr&&e(_)),n===R&&(43===r.charCodeAt(or)?(n=$,or++):(n=R,0===pr&&e(D))),n===R&&(n=K),n!==R?(u=f(),u!==R?(cr=t,n=tr(n,u),t=n):(or=t,t=S)):(or=t,t=S),pr--,t===R&&(n=R,0===pr&&e(rr)),t}function f(){var t,n,u;if(pr++,t=or,n=[],er.test(r.charAt(or))?(u=r.charAt(or),or++):(u=R,0===pr&&e(ur)),u!==R)for(;u!==R;)n.push(u),er.test(r.charAt(or))?(u=r.charAt(or),or++):(u=R,0===pr&&e(ur));else n=S;return n!==R&&(cr=t,n=ir(n)),t=n,pr--,t===R&&(n=R,0===pr&&e(nr)),t}function p(r){return{type:"num",arg:r}}function d(r){return{type:"add",arg:r}}function h(r){return{type:"mul",arg:r}}function m(r){return{type:"over",arg:r}}function v(r){return{type:"mixed",arg:r}}function g(r){return{type:"exp",arg:r}}function y(r){return{type:"minus",arg:r}}function x(r){return{type:"div",arg:r}}function C(r){return r.map(function(r){if("-"===r[0]){if("num"!==r[1].type)return y(r[1]);r[1].arg=-r[1].arg}return r[1]})}function A(r){return r.map(function(r){return"÷"===r[0]?x(r[1]):r[1]})}var b,w=arguments.length>1?arguments[1]:{},R={},F={S:i},E=i,M={type:"other",description:"expression"},S=R,$="+",D={type:"literal",value:"+",description:'"+"'},J="-",_={type:"literal",value:"-",description:'"-"'},q=function(r,t){return d([r].concat(C(t)))},I={type:"other",description:"term"},U="*",j={type:"literal",value:"*",description:'"*"'},k="÷",O={type:"literal",value:"÷",description:'"\\xF7"'},H=function(r,t){return h([r].concat(A(t)))},L={type:"other",description:"fraction"},N="/",P={type:"literal",value:"/",description:'"/"'},Q=function(r,t){return m([r,t])},T=" ",z={type:"literal",value:" ",description:'" "'},B=function(r,t,n){return v([r,t,n])},G={type:"other",description:"factor"},K=null,V="(",W={type:"literal",value:"(",description:'"("'},X=")",Y={type:"literal",value:")",description:'")"'},Z=function(r,t){var n=g(t);return"-"===r?y(n):n},rr={type:"other",description:"integer"},tr=function(r,t){return p(parseInt((r||"")+t.arg,10))},nr={type:"other",description:"unsigned integer"},er=/^[0-9]/,ur={type:"class",value:"[0-9]",description:"[0-9]"},ir=function(r){return p(parseInt(r.join(""),10))},or=0,cr=0,ar=0,sr={line:1,column:1,seenCR:!1},lr=0,fr=[],pr=0;if("startRule"in w){if(!(w.startRule in F))throw new Error("Can't start parsing from rule \""+w.startRule+'".');E=F[w.startRule]}if(b=E(),b!==R&&or===r.length)return b;throw b!==R&&or<r.length&&e({type:"end",description:"end of input"}),u(null,fr,lr)}return r(t,Error),{SyntaxError:t,parse:n}}()},{}],4:[function(r,t,n){var e,u,i;i=function(r,t){var n;for(n=0;0!==t;)n=r%t,r=t,t=n;return Math.abs(r)},u=new Error("Division by zero!"),e=function(){function r(r,t){var n,e;if(null==t&&(t=1),0===t)throw u;0>t&&(e=[-r,-t],r=e[0],t=e[1]),n=i(r,t),this.n=r/n,this.d=t/n}return r.prototype.isProper=function(){return this.n<this.d},r.prototype.toFloat=function(){return this.n/this.d},r.prototype.toString=function(){return 1===this.d?""+this.n:this.n+"/"+this.d},r.prototype.toMixedString=function(){return this.isProper()?this.toString():this.n%this.d===0?""+Math.floor(this.n/this.d):Math.floor(this.n/this.d)+" "+this.n%this.d+"/"+this.d},r.create=function(t,n){return new r(t,n)},r.mixed=function(r,t,n){return this.create(t+r*n,n)},r.add=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*i+u*e,e*i)},r.minus=function(r){var t,n,e;return e=[r.n,r.d],n=e[0],t=e[1],this.create(-n,t)},r.mul=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*u,e*i)},r.div=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*i,e*u)},r.reciprocal=function(r){var t,n,e;return e=[r.n,r.d],n=e[0],t=e[1],this.create(t,n)},r}(),t.exports=e},{}],5:[function(r,t,n){var e;(e=jQuery)(function(){var t,n,u,i,o,c,a,s,l,f,p,d,h,m,v,g;return u=e("#calculator"),o=e("#output"),i=e("#decimal"),t=e("#buffer"),c=e("#parsed"),a=function(){return e(".MathJax_Display").css("margin","0").css("text-align","right")},l=function(r){var t;if(0!==r)return t=e("#output .MathJax_Display span").filter(function(r,t){return")"===e(t).text()}),e(t.slice(-r)).addClass("dimmed")},m=function(){return e("#output .MathJax_Display span").filter(function(r,t){return"∘"===e(t).text()})},f=function(){return m().addClass("dimmed")},s=function(){return m().last().parent().parent().addClass("dimmed").children("span").filter(function(r,t){return e(t).text().match(/\d+/)}).css("color","#333")},v=function(r,n){return i.text(null!=(null!=n?n.decimal:void 0)?n.decimal:""),MathJax.Hub.Queue(function(){return c.text(r),t.text("$$"+r+"$$"),MathJax.Hub.Typeset(t.get(),function(){var u,i;return c.text()===r&&o.html(t.html()),a(),l((null!=n&&null!=(u=n.incomplete)?u.parens:void 0)||0),(null!=n&&null!=(i=n.incomplete)?i.symbols:void 0)>0?s():f(),e("#output").scrollLeft(1e9)})})},p=r("./calculator")({output:v,onError:function(r){return alert(r)}}),h=function(r){return r.data("symbol")||r.text()},n=e(".btn"),d=n.map(function(){return h(e(this)).charCodeAt(0)}),u.keypress(function(r){var t,n;return t=13===r.which?"=":String.fromCharCode(r.which).toUpperCase(),n=t.charCodeAt(0),-1!==d.index(n)?(p.input(t),g()):void 0}).keydown(function(r){return 8===r.which?(p.uninput(),g(),r.preventDefault()):void 0}),n.click(function(){return p.input(h(e(this))),g()}),g=function(){return n.each(function(){return p.canInput(h(e(this)))?this.removeAttribute("disabled"):this.setAttribute("disabled","disabled")})},g(),u.focus()})},{"./calculator":1}]},{},[5]);
//# sourceMappingURL=main.min.js.map