!function r(t,n,e){function u(o,c){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(r){var n=t[o][1][r];return u(n?n:r)},f,f.exports,r,t,n,e)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(r){var t;(t=jQuery)(function(){var n,e,u,i,o,c,a,s,f,l,p;return u=t("#calculator"),o=t("#output"),i=t("#decimal"),n=t("#buffer"),c=t("#parsed"),l=function(r,t){return null==t&&(t=""),i.text(t),MathJax.Hub.Queue(function(){return c.text(r),n.text("`"+r+"`"),MathJax.Hub.Typeset(n.get(),function(){return c.text()===r?o.html(n.html()):void 0})})},a=r("./calculator")({output:l,onError:function(r){return alert(r)}}),f=function(r){return r.data("symbol")||r.text()},e=t(".btn"),s=e.map(function(){return f(t(this)).charCodeAt(0)}),u.keypress(function(r){var t,n;return t=13===r.which?"=":String.fromCharCode(r.which).toUpperCase(),n=t.charCodeAt(0),-1!==s.index(n)?(a.input(t),p()):void 0}).keydown(function(r){return 8===r.which?(a.uninput(),p(),r.preventDefault()):void 0}),e.click(function(){return a.input(f(t(this))),p()}),p=function(){return e.each(function(){return a.canInput(f(t(this)))?this.removeAttribute("disabled"):this.setAttribute("disabled",!0)})},p(),u.focus()})},{"./calculator":2}],2:[function(r,t){var n,e;n=r("./fractions-parser"),e=function(r){var t,e,u,i,o,c,a,s,f;return a=r.output,c=r.onError,t={curr:"",isRes:!1,val:function(r,t){return null==t&&(t=!1),null!=r&&(this.curr=r),this.isRes=t,this.curr},hasResult:function(){return this.isRes}},u=function(r){var e,u;return"C"===r?!0:"="===r?(e=t.val(),u=n.parse(e),!u.ast.error&&!u.ast.incomplete):(e=t.val()+r)?(u=n.parse(e),!u.ast.error):!0},o=function(r){return"C"===r&&t.val(r=""),"="===r?e():(t.val(t.hasResult()&&r.match(/\d/)?r:t.val()+r),s())},f=function(){var r;return r=t.val(),t.val(r.slice(0,-1)),s()},i=function(){return a("")},s=function(){var r,e;return r=t.val(),r.trim()?(e=n.parse(r),null!=e.ast.error?f():a(e.render())):i()},e=function(){var r,e,u,o;return r=t.val(),r.trim()?(e=n.parse(r),e.ast.incomplete?void 0:(u=e.render({result:!0}),u.error?c(u.error):(o=e.calc(),a(u,o.toFloat()),t.val(o.toString(),!0)))):i()},i(),{canInput:u,input:o,uninput:f}},t.exports=e},{"./fractions-parser":3}],3:[function(r,t){var n,e,u,i,o,c,a,s,f;i=r("./fractions"),a=r("./fractions-peg-parser"),e=function(r){var t,n;return n=function(r){if(r.arg){if(r.arg.length)return n("missing"===r.arg[r.arg.length-1].type?r.arg[r.arg.length-2]:r.arg[r.arg.length-1]);if("num"!==r.type)return n(r.arg)}return r},t=n(r),-1===t.arg?(t.type="minus",delete t.arg):(t.type="missing",delete t.arg)},c=function(r){var t;try{return a.parse(r)}catch(n){return t=n,f(r,t)}},f=function(r,t){var n,u,i,o,c,s;for(i=r,s=0,i.match(/[^\d\)\s]+$/)&&(i+="1",++s),c=(i.match(/\(/g)||[]).length,u=(i.match(/\)/g)||[]).length,o=c-u;c-->u;)i+=")";if(0===o&&0===s&&(i.match(/\d$/)&&(i+="/1",++s),i.match(/\s$/)&&(i+="1/1",s+=2)),r!==i)try{for(n=a.parse(i),o>0&&(n.numParensAdded=o);s-->0;)n.incomplete=!0,e(n);return n}catch(f){}return{error:t.message}},o=function(r,t){var n;return r?null!=r.error?t.error(r.error):(n=function(r){return t[r.type](r.arg,n)},t.post(n(r))):null},u=function(r){var t,n;if(null!=r.incomplete)return{error:"incomplete expression"};try{return n=i,o(r,{error:function(){return""},num:function(r){return n.create(r)},add:function(r,t){return r.map(t).reduce(function(r,t){return n.add(r,t)})},minus:function(r,t){return n.minus(t(r))},mul:function(r,t){return r.map(t).reduce(function(r,t){return n.mul(r,t)})},mixed:function(r){return n.mixed(r[0].arg,r[1].arg,r[2].arg)},over:function(r,t){var e;return 2===r.length?n.div(t(r[0]),t(r[1])):(e=r.map(t).reduce(function(r,t){var n;return n=r[r.length-1],n.length<2?n.push(t):r.push([t]),r},[[]]),e.map(function(r){return n.div(r[0],r[1]||n.create(1))}).reduce(function(r,t){return n.div(r,t)}))},exp:function(r,t){return t(r)},post:function(r){return r}})}catch(e){return t=e,{error:t.message}}},s=function(r,t){var n;return n=function(t){var n,e;return e=u(r),null!=e.error?{error:e.error}:(t!==e.toString()&&(t+="="+e),n=e.toMixedString(),n!==e.toString()&&(t+="="+n),t)},o(r,{error:function(r){return{error:r}},missing:function(){return""},num:function(r){return""+r},add:function(r,t){return r.map(t).reduce(function(r,t){return r+"+"+t})},minus:function(r,t){return"-"+t(r)},mul:function(r,t){return r.map(t).reduce(function(r,t){return r+"xx"+t})},mixed:function(r,t){return t(r[0])+" "+t(r[1])+"/"+t(r[2])},over:function(r,t){var n,e;return n="",e=function(){return n="/"===n?"-:":"/"},r.map(t).reduce(function(r,t){return r+e()+t})},exp:function(r,t){return"("+t(r)+")"},post:function(r){return r=r.replace(/\+-/g,"-").replace(/--/g,"+"),(null!=t?t.result:void 0)?n(r):r}})},n=function(){function r(r){this.ast=r}return r.prototype.calc=function(){return u(this.ast)},r.prototype.render=function(r){return s(this.ast,r)},r}(),t.exports={parse:function(r){return new n(c(r))}}},{"./fractions":5,"./fractions-peg-parser":4}],4:[function(r,t){t.exports=function(){function r(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function t(r,t,n,e,u,i){this.message=r,this.expected=t,this.found=n,this.offset=e,this.line=u,this.column=i,this.name="SyntaxError"}function n(r){function n(t){function n(t,n,e){var u,i;for(u=n;e>u;u++)i=r.charAt(u),"\n"===i?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return ut!==t&&(ut>t&&(ut=0,it={line:1,column:1,seenCR:!1}),n(it,ut,t),ut=t),it}function e(r){ot>nt||(nt>ot&&(ot=nt,ct=[]),ct.push(r))}function u(e,u,i){function o(r){var t=1;for(r.sort(function(r,t){return r.description<t.description?-1:r.description>t.description?1:0});t<r.length;)r[t-1]===r[t]?r.splice(t,1):t++}function c(r,t){function n(r){function t(r){return r.charCodeAt(0).toString(16).toUpperCase()}return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+t(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+t(r)}).replace(/[\u0180-\u0FFF]/g,function(r){return"\\u0"+t(r)}).replace(/[\u1080-\uFFFF]/g,function(r){return"\\u"+t(r)})}var e,u,i,o=new Array(r.length);for(i=0;i<r.length;i++)o[i]=r[i].description;return e=r.length>1?o.slice(0,-1).join(", ")+" or "+o[r.length-1]:o[0],u=t?'"'+n(t)+'"':"end of input","Expected "+e+" but "+u+" found."}var a=n(i),s=i<r.length?r.charAt(i):null;return null!==u&&o(u),new t(null!==e?e:c(u,s),u,s,i,a.line,a.column)}function i(){var r;return r=o()}function o(){var t,n,u,i,o,a;if(at++,t=nt,n=c(),n!==w){if(u=[],i=nt,43===r.charCodeAt(nt)?(o=E,nt++):(o=w,0===at&&e(M)),o===w&&(45===r.charCodeAt(nt)?(o=j,nt++):(o=w,0===at&&e(q))),o!==w?(a=c(),a!==w?(o=[o,a],i=o):(nt=i,i=S)):(nt=i,i=S),i!==w)for(;i!==w;)u.push(i),i=nt,43===r.charCodeAt(nt)?(o=E,nt++):(o=w,0===at&&e(M)),o===w&&(45===r.charCodeAt(nt)?(o=j,nt++):(o=w,0===at&&e(q))),o!==w?(a=c(),a!==w?(o=[o,a],i=o):(nt=i,i=S)):(nt=i,i=S);else u=S;u!==w?(et=t,n=D(n,u),t=n):(nt=t,t=S)}else nt=t,t=S;return t===w&&(t=c()),at--,t===w&&(n=w,0===at&&e(b)),t}function c(){var t,n,u,i,o,c;if(at++,t=nt,n=a(),n!==w){if(u=[],i=nt,42===r.charCodeAt(nt)?(o=U,nt++):(o=w,0===at&&e(k)),o!==w?(c=a(),c!==w?(o=[o,c],i=o):(nt=i,i=S)):(nt=i,i=S),i!==w)for(;i!==w;)u.push(i),i=nt,42===r.charCodeAt(nt)?(o=U,nt++):(o=w,0===at&&e(k)),o!==w?(c=a(),c!==w?(o=[o,c],i=o):(nt=i,i=S)):(nt=i,i=S);else u=S;u!==w?(et=t,n=O(n,u),t=n):(nt=t,t=S)}else nt=t,t=S;return t===w&&(t=a()),at--,t===w&&(n=w,0===at&&e(I)),t}function a(){var t,n,u,i,o,c;if(at++,t=nt,n=s(),n!==w){if(u=[],i=nt,47===r.charCodeAt(nt)?(o=$,nt++):(o=w,0===at&&e(H)),o!==w?(c=s(),c!==w?(o=[o,c],i=o):(nt=i,i=S)):(nt=i,i=S),i!==w)for(;i!==w;)u.push(i),i=nt,47===r.charCodeAt(nt)?(o=$,nt++):(o=w,0===at&&e(H)),o!==w?(c=s(),c!==w?(o=[o,c],i=o):(nt=i,i=S)):(nt=i,i=S);else u=S;u!==w?(et=t,n=J(n,u),t=n):(nt=t,t=S)}else nt=t,t=S;return t===w&&(t=nt,n=f(),n!==w?(32===r.charCodeAt(nt)?(u=N,nt++):(u=w,0===at&&e(Q)),u!==w?(i=l(),i!==w?(47===r.charCodeAt(nt)?(o=$,nt++):(o=w,0===at&&e(H)),o!==w?(c=f(),c!==w?(et=t,n=T(n,i,c),t=n):(nt=t,t=S)):(nt=t,t=S)):(nt=t,t=S)):(nt=t,t=S)):(nt=t,t=S),t===w&&(t=s())),at--,t===w&&(n=w,0===at&&e(P)),t}function s(){var t,n,u,i,c;return at++,t=f(),t===w&&(t=nt,45===r.charCodeAt(nt)?(n=j,nt++):(n=w,0===at&&e(q)),n===w&&(43===r.charCodeAt(nt)?(n=E,nt++):(n=w,0===at&&e(M))),n===w&&(n=z),n!==w?(40===r.charCodeAt(nt)?(u=B,nt++):(u=w,0===at&&e(L)),u!==w?(i=o(),i!==w?(41===r.charCodeAt(nt)?(c=G,nt++):(c=w,0===at&&e(K)),c!==w?(et=t,n=V(n,i),t=n):(nt=t,t=S)):(nt=t,t=S)):(nt=t,t=S)):(nt=t,t=S)),at--,t===w&&(n=w,0===at&&e(_)),t}function f(){var t,n,u,i;if(at++,t=nt,45===r.charCodeAt(nt)?(n=j,nt++):(n=w,0===at&&e(q)),n===w&&(43===r.charCodeAt(nt)?(n=E,nt++):(n=w,0===at&&e(M))),n===w&&(n=z),n!==w){if(u=[],X.test(r.charAt(nt))?(i=r.charAt(nt),nt++):(i=w,0===at&&e(Y)),i!==w)for(;i!==w;)u.push(i),X.test(r.charAt(nt))?(i=r.charAt(nt),nt++):(i=w,0===at&&e(Y));else u=S;u!==w?(et=t,n=Z(n,u),t=n):(nt=t,t=S)}else nt=t,t=S;return at--,t===w&&(n=w,0===at&&e(W)),t}function l(){var t,n,u;if(at++,t=nt,n=[],X.test(r.charAt(nt))?(u=r.charAt(nt),nt++):(u=w,0===at&&e(Y)),u!==w)for(;u!==w;)n.push(u),X.test(r.charAt(nt))?(u=r.charAt(nt),nt++):(u=w,0===at&&e(Y));else n=S;return n!==w&&(et=t,n=tt(n)),t=n,at--,t===w&&(n=w,0===at&&e(rt)),t}function p(r){return{type:"num",arg:r}}function h(r){return{type:"add",arg:r}}function d(r){return{type:"mul",arg:r}}function g(r){return{type:"over",arg:r}}function v(r){return{type:"mixed",arg:r}}function m(r){return{type:"exp",arg:r}}function y(r){return{type:"minus",arg:r}}function x(r){return r.map(function(r){return"-"===r[0]?y(r[1]):r[1]})}var A,C=arguments.length>1?arguments[1]:{},w={},R={S:i},F=i,b={type:"other",description:"expression"},S=w,E="+",M={type:"literal",value:"+",description:'"+"'},j="-",q={type:"literal",value:"-",description:'"-"'},D=function(r,t){return h([r].concat(x(t)))},I={type:"other",description:"term"},U="*",k={type:"literal",value:"*",description:'"*"'},O=function(r,t){return d([r].concat(x(t)))},P={type:"other",description:"fraction"},$="/",H={type:"literal",value:"/",description:'"/"'},J=function(r,t){return g([r].concat(x(t)))},N=" ",Q={type:"literal",value:" ",description:'" "'},T=function(r,t,n){return v([r,t,n])},_={type:"other",description:"factor"},z=null,B="(",L={type:"literal",value:"(",description:'"("'},G=")",K={type:"literal",value:")",description:'")"'},V=function(r,t){var n=m(t);return"-"===r?y(n):n},W={type:"other",description:"integer"},X=/^[0-9]/,Y={type:"class",value:"[0-9]",description:"[0-9]"},Z=function(r,t){return p(parseInt((r||"")+t.join(""),10))},rt={type:"other",description:"unsigned integer"},tt=function(r){return p(parseInt(r.join(""),10))},nt=0,et=0,ut=0,it={line:1,column:1,seenCR:!1},ot=0,ct=[],at=0;if("startRule"in C){if(!(C.startRule in R))throw new Error("Can't start parsing from rule \""+C.startRule+'".');F=R[C.startRule]}if(A=F(),A!==w&&nt===r.length)return A;throw A!==w&&nt<r.length&&e({type:"end",description:"end of input"}),u(null,ct,ot)}return r(t,Error),{SyntaxError:t,parse:n}}()},{}],5:[function(r,t){var n,e,u;u=function(r,t){var n;for(n=0;0!==t;)n=r%t,r=t,t=n;return Math.abs(r)},e=new Error("Division by zero!"),n=function(){function r(r,t){var n,i;if(null==t&&(t=1),0===t)throw e;0>t&&(i=[-r,-t],r=i[0],t=i[1]),n=u(r,t),this.n=r/n,this.d=t/n}return r.prototype.isProper=function(){return this.n<this.d},r.prototype.toFloat=function(){return this.n/this.d},r.prototype.toString=function(){return 1===this.d?""+this.n:this.n+"/"+this.d},r.prototype.toMixedString=function(){return this.isProper()?this.toString():this.n%this.d===0?""+Math.floor(this.n/this.d):Math.floor(this.n/this.d)+" "+this.n%this.d+"/"+this.d},r.create=function(t,n){return new r(t,n)},r.mixed=function(r,t,n){return this.create(t+r*n,n)},r.add=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*i+u*e,e*i)},r.minus=function(r){var t,n,e;return e=[r.n,r.d],n=e[0],t=e[1],this.create(-n,t)},r.mul=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*u,e*i)},r.div=function(r,t){var n,e,u,i,o;return o=[r.n,r.d,t.n,t.d],n=o[0],e=o[1],u=o[2],i=o[3],this.create(n*i,e*u)},r}(),t.exports=n},{}]},{},[1]);
//# sourceMappingURL=main.min.js.map