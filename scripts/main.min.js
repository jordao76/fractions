!function r(n,t,e){function u(o,c){if(!t[o]){if(!n[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(r){var t=n[o][1][r];return u(t?t:r)},s,s.exports,r,n,t,e)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(r){!function(r,n,t){"use strict";n(function(){var e=n("#input"),u=n("#output"),i=n("#buffer"),o=n("#parsed"),c=n("#decimal"),a=function(n){r.Hub.Queue(function(){o.text(n),i.text("`"+n+"`"),r.Hub.Typeset(i.get(),function(){o.text()===n&&u.html(i.html())})})},f=null,s=function(){c.text(""),a(""),f=""},p=function(){var r=e.val();if(!r.trim())return s();if(r!==f){var n=t.parse(r);a(n.render()),c.text(""),f=r}},l=function(){var r=e.val();if(!r.trim())return s();var n=t.parse(r),u=n.calc();a(n.render(u)),u.error||(c.text(u.toFloat()),e.val(f=u.toString()))};e.keyup(function(r){13===r.which&&l()}),e.on("input propertychange",p),e.focus()})}(MathJax,jQuery,r("./fractions-parser"))},{"./fractions-parser":2}],2:[function(r,n){n.exports=function(r,n){"use strict";var t=function(r,e){try{var u=n.parse(r);if(e&&e.missingNumber){var i=function(r){if(r.arg){if(r.arg.length)return i(r.arg[r.arg.length-1]);if("num"!==r.type)return i(r.arg)}return r},o=i(u);-1===o.arg?(o.type="minus",o.arg={type:"missing"}):(o.type="missing",delete o.arg)}return u}catch(c){var a=r;a.match(/\D+$/)&&(a+="1",c.missingNumber=!0);for(var f=(a.match(/\(/g)||[]).length,s=(a.match(/\)/g)||[]).length;f-->s;)a+=")";return r!==a?t(a,c):{error:c.message}}},e=function(r,n){if(!r)return n.nil();if(r.error)return n.error(r.error);var t=function(r){return n[r.type](r.arg,t)};return n.post(t(r))},u=function(n){try{var t=r;return e(n,{missing:function(){throw new Error("incomplete expression")},nil:function(){return""},error:function(){return""},num:function(r){return t.create(r)},add:function(r,n){return r.map(n).reduce(function(r,n){return t.add(r,n)})},minus:function(r,n){return t.minus(n(r))},mul:function(r,n){return r.map(n).reduce(function(r,n){return t.mul(r,n)})},over:function(r,n){if(2===r.length)return t.div(n(r[0]),n(r[1]));var e=r.map(n).reduce(function(r,n){var t=r[r.length-1];return t.length<2?t.push(n):r.push([n]),r},[[]]);return e.map(function(r){return t.div(r[0],r[1]||t.create(1))}).reduce(function(r,n){return t.div(r,n)})},exp:function(r,n){return n(r)},post:function(r){return r}})}catch(u){return{error:u.message}}},i="",o=function(r,n){var t=e(r,{missing:function(){return i},nil:function(){return""},error:function(){return'bb"Error"'},num:function(r){return""+r},add:function(r,n){return r.map(n).reduce(function(r,n){return r+"+"+n})},minus:function(r,n){return"-"+n(r)},mul:function(r,n){return r.map(n).reduce(function(r,n){return r+"xx"+n})},over:function(r,n){var t="",e=function(){return t="/"===t?"-:":"/"};return r.map(n).reduce(function(r,n){return r+e()+n})},exp:function(r,n){return"("+n(r)+")"},post:function(r){return r.replace(/\+-/g,"-").replace(/--/g,"+")}});return n&&(t+=n.error?' = bb"'+n.error+'"':" = "+n),t},c=function(r){this.ast=r};return c.prototype={calc:function(){return u(this.ast)},render:function(r){return o(this.ast,r)}},{parse:function(r){return new c(t(r))},placeholder:i}}(r("./fractions"),r("./fractions-peg-parser"))},{"./fractions":4,"./fractions-peg-parser":3}],3:[function(r,n){n.exports=function(){function r(r,n){function t(){this.constructor=r}t.prototype=n.prototype,r.prototype=new t}function n(r,n,t,e,u,i){this.message=r,this.expected=n,this.found=t,this.offset=e,this.line=u,this.column=i,this.name="SyntaxError"}function t(r){function t(n){function t(n,t,e){var u,i;for(u=t;e>u;u++)i=r.charAt(u),"\n"===i?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1)}return X!==n&&(X>n&&(X=0,Y={line:1,column:1,seenCR:!1}),t(Y,X,n),X=n),Y}function e(r){Z>V||(V>Z&&(Z=V,rn=[]),rn.push(r))}function u(e,u,i){function o(r){var n=1;for(r.sort(function(r,n){return r.description<n.description?-1:r.description>n.description?1:0});n<r.length;)r[n-1]===r[n]?r.splice(n,1):n++}function c(r,n){function t(r){function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+n(r)}).replace(/[\u0180-\u0FFF]/g,function(r){return"\\u0"+n(r)}).replace(/[\u1080-\uFFFF]/g,function(r){return"\\u"+n(r)})}var e,u,i,o=new Array(r.length);for(i=0;i<r.length;i++)o[i]=r[i].description;return e=r.length>1?o.slice(0,-1).join(", ")+" or "+o[r.length-1]:o[0],u=n?'"'+t(n)+'"':"end of input","Expected "+e+" but "+u+" found."}var a=t(i),f=i<r.length?r.charAt(i):null;return null!==u&&o(u),new n(null!==e?e:c(u,f),u,f,i,a.line,a.column)}function i(){var r;return r=o()}function o(){var n,t,u,i,o,a;if(nn++,n=V,t=c(),t!==C){if(u=[],i=V,43===r.charCodeAt(V)?(o=E,V++):(o=C,0===nn&&e(R)),o===C&&(45===r.charCodeAt(V)?(o=S,V++):(o=C,0===nn&&e(q))),o!==C?(a=c(),a!==C?(o=[o,a],i=o):(V=i,i=b)):(V=i,i=b),i!==C)for(;i!==C;)u.push(i),i=V,43===r.charCodeAt(V)?(o=E,V++):(o=C,0===nn&&e(R)),o===C&&(45===r.charCodeAt(V)?(o=S,V++):(o=C,0===nn&&e(q))),o!==C?(a=c(),a!==C?(o=[o,a],i=o):(V=i,i=b)):(V=i,i=b);else u=b;u!==C?(W=n,t=D(t,u),n=t):(V=n,n=b)}else V=n,n=b;return n===C&&(n=c()),nn--,n===C&&(t=C,0===nn&&e(F)),n}function c(){var n,t,u,i,o,c;if(nn++,n=V,t=a(),t!==C){if(u=[],i=V,42===r.charCodeAt(V)?(o=j,V++):(o=C,0===nn&&e(M)),o!==C?(c=a(),c!==C?(o=[o,c],i=o):(V=i,i=b)):(V=i,i=b),i!==C)for(;i!==C;)u.push(i),i=V,42===r.charCodeAt(V)?(o=j,V++):(o=C,0===nn&&e(M)),o!==C?(c=a(),c!==C?(o=[o,c],i=o):(V=i,i=b)):(V=i,i=b);else u=b;u!==C?(W=n,t=O(t,u),n=t):(V=n,n=b)}else V=n,n=b;return n===C&&(n=a()),nn--,n===C&&(t=C,0===nn&&e(N)),n}function a(){var n,t,u,i,o,c;if(nn++,n=V,t=f(),t!==C){if(u=[],i=V,47===r.charCodeAt(V)?(o=H,V++):(o=C,0===nn&&e(Q)),o!==C?(c=f(),c!==C?(o=[o,c],i=o):(V=i,i=b)):(V=i,i=b),i!==C)for(;i!==C;)u.push(i),i=V,47===r.charCodeAt(V)?(o=H,V++):(o=C,0===nn&&e(Q)),o!==C?(c=f(),c!==C?(o=[o,c],i=o):(V=i,i=b)):(V=i,i=b);else u=b;u!==C?(W=n,t=T(t,u),n=t):(V=n,n=b)}else V=n,n=b;return n===C&&(n=f()),nn--,n===C&&(t=C,0===nn&&e(U)),n}function f(){var n,t,u,i,c;return nn++,n=s(),n===C&&(n=V,45===r.charCodeAt(V)?(t=S,V++):(t=C,0===nn&&e(q)),t===C&&(43===r.charCodeAt(V)?(t=E,V++):(t=C,0===nn&&e(R))),t===C&&(t=k),t!==C?(40===r.charCodeAt(V)?(u=z,V++):(u=C,0===nn&&e(B)),u!==C?(i=o(),i!==C?(41===r.charCodeAt(V)?(c=I,V++):(c=C,0===nn&&e(J)),c!==C?(W=n,t=L(t,i),n=t):(V=n,n=b)):(V=n,n=b)):(V=n,n=b)):(V=n,n=b)),nn--,n===C&&(t=C,0===nn&&e(_)),n}function s(){var n,t,u,i;if(nn++,n=V,45===r.charCodeAt(V)?(t=S,V++):(t=C,0===nn&&e(q)),t===C&&(43===r.charCodeAt(V)?(t=E,V++):(t=C,0===nn&&e(R))),t===C&&(t=k),t!==C){if(u=[],G.test(r.charAt(V))?(i=r.charAt(V),V++):(i=C,0===nn&&e(K)),i!==C)for(;i!==C;)u.push(i),G.test(r.charAt(V))?(i=r.charAt(V),V++):(i=C,0===nn&&e(K));else u=b;u!==C?(W=n,t=P(t,u),n=t):(V=n,n=b)}else V=n,n=b;return nn--,n===C&&(t=C,0===nn&&e($)),n}function p(r){return{type:"num",arg:r}}function l(r){return{type:"add",arg:r}}function h(r){return{type:"mul",arg:r}}function d(r){return{type:"over",arg:r}}function g(r){return{type:"exp",arg:r}}function v(r){return{type:"minus",arg:r}}function m(r){return r.map(function(r){return"-"===r[0]?v(r[1]):r[1]})}var y,x=arguments.length>1?arguments[1]:{},C={},A={S:i},w=i,F={type:"other",description:"expression"},b=C,E="+",R={type:"literal",value:"+",description:'"+"'},S="-",q={type:"literal",value:"-",description:'"-"'},D=function(r,n){return l([r].concat(m(n)))},N={type:"other",description:"term"},j="*",M={type:"literal",value:"*",description:'"*"'},O=function(r,n){return h([r].concat(m(n)))},U={type:"other",description:"fraction"},H="/",Q={type:"literal",value:"/",description:'"/"'},T=function(r,n){return d([r].concat(m(n)))},_={type:"other",description:"factor"},k=null,z="(",B={type:"literal",value:"(",description:'"("'},I=")",J={type:"literal",value:")",description:'")"'},L=function(r,n){var t=g(n);return"-"===r?v(t):t},$={type:"other",description:"integer"},G=/^[0-9]/,K={type:"class",value:"[0-9]",description:"[0-9]"},P=function(r,n){return p(parseInt((r||"")+n.join(""),10))},V=0,W=0,X=0,Y={line:1,column:1,seenCR:!1},Z=0,rn=[],nn=0;if("startRule"in x){if(!(x.startRule in A))throw new Error("Can't start parsing from rule \""+x.startRule+'".');w=A[x.startRule]}if(y=w(),y!==C&&V===r.length)return y;throw y!==C&&V<r.length&&e({type:"end",description:"end of input"}),u(null,rn,Z)}return r(n,Error),{SyntaxError:n,parse:t}}()},{}],4:[function(r,n){n.exports=function(){"use strict";var r=function(r,n){for(var t=0;0!==n;)t=r%n,r=n,n=t;return Math.abs(r)},n=new Error("Division by zero!"),t=function(t,e){if(0===e)throw n;e=e||1,0>e&&(t=-t,e=-e);var u=r(t,e);this.n=t/u,this.d=e/u},e=function(r,n){return new t(r,n)};return t.create=function(r,n){return e(r,n)},t.add=function(r,n){var t=r.n,u=r.d,i=n.n,o=n.d;return e(t*o+i*u,u*o)},t.minus=function(r){var n=r.n,t=r.d;return e(-n,t)},t.mul=function(r,n){var t=r.n,u=r.d,i=n.n,o=n.d;return e(t*i,u*o)},t.div=function(r,n){var t=r.n,u=r.d,i=n.n,o=n.d;return e(t*o,u*i)},t.prototype={toFloat:function(){return this.n/this.d},toString:function(){return 1===this.d?""+this.n:this.n+"/"+this.d}},t}()},{}]},{},[1]);
//# sourceMappingURL=main.min.js.map