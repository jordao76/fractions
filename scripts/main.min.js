!function r(t,n,e){function u(o,c){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(r){var n=t[o][1][r];return u(n?n:r)},f,f.exports,r,t,n,e)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(r){var t,n;t=jQuery,n=r("./fractions-parser"),t(function(){var r,e,u,i,o,c,a,s,f,l,p,h,d,v,g,m,y,x;return c=t("#output"),o=t("<input type=text/>"),r=t("#buffer"),a=t("#parsed"),i=t("#decimal"),u=t("#calculator"),d=function(r){return"C"===r&&o.val(r=""),"="===r?f():(o.val(o.val()+r),m())},p=function(r){var t,e;return"C"===r?!0:"="===r?(t=o.val(),e=n.parse(t),!e.ast.error&&!e.ast.incomplete):(t=o.val()+r,t.trim()?(e=n.parse(t),!e.ast.error):!0)},x=function(){var r;return r=o.val(),o.val(r.slice(0,-1)),m()},g=function(t){return MathJax.Hub.Queue(function(){return a.text(t),r.text("`"+t+"`"),MathJax.Hub.Typeset(r.get(),function(){return a.text()===t?c.html(r.html()):void 0})})},v=null,s=function(){return i.text(""),g(""),v=""},m=function(){var r,t;return r=o.val(),r.trim()?r!==v?(t=n.parse(r),null!=t.ast.error?x():(g(t.render()[0]),i.text(""),v=r)):void 0:s()},f=function(){var r,t,e,u,c;return r=o.val(),r.trim()?(t=n.parse(r),t.ast.incomplete?void 0:(e=t.render({result:!0}),u=e[0],c=e[1],c.error?alert(c.error):(g(u),i.text(c.toFloat()),o.val(v=c.toString())))):s()},h=function(r){return r.data("symbol")||r.text()},e=t(".btn"),l=e.map(function(){return h(t(this)).charCodeAt(0)}),u.keypress(function(r){var t,n;return t=13===r.which?"=":String.fromCharCode(r.which).toUpperCase(),n=t.charCodeAt(0),-1!==l.index(n)?(d(t),y()):void 0}).keydown(function(r){return 8===r.which?(x(),y(),r.preventDefault()):void 0}),e.click(function(){return d(h(t(this))),y()}),y=function(){return e.each(function(){return p(h(t(this)))?this.removeAttribute("disabled"):this.setAttribute("disabled",!0)})},y(),u.focus()})},{"./fractions-parser":2}],2:[function(r,t){var n,e,u,i,o,c,a,s,f,l;i=r("./fractions"),a=r("./fractions-peg-parser"),e=function(r){var t,n;return r.incomplete=!0,n=function(r){if(r.arg){if(r.arg.length)return n(r.arg[r.arg.length-1]);if("num"!==r.type)return n(r.arg)}return r},t=n(r),-1===t.arg?(t.type="minus",t.arg={type:"missing"}):(t.type="missing",delete t.arg)},c=function(r,t){var n,u;r=r.trim();try{return n=a.parse(r),t&&e(n),n}catch(i){return u=i,l(r,u)}},l=function(r,t){var n,e,u,i;for(u=r,n=!1,u.match(/\D+$/)&&(u+="1",n=!0),i=(u.match(/\(/g)||[]).length,e=(u.match(/\)/g)||[]).length;i-->e;)u+=")";return r!==u?c(u,n):{error:t.message}},o=function(r,t){var n;return null==r?t.nil():null!=r.error?t.error(r.error):(n=function(r){return t[r.type](r.arg,n)},t.post(n(r)))},u=function(r){var t,n;try{return n=i,o(r,{missing:function(){throw new Error("incomplete expression")},nil:function(){return""},error:function(){return""},num:function(r){return n.create(r)},add:function(r,t){return r.map(t).reduce(function(r,t){return n.add(r,t)})},minus:function(r,t){return n.minus(t(r))},mul:function(r,t){return r.map(t).reduce(function(r,t){return n.mul(r,t)})},over:function(r,t){var e;return 2===r.length?n.div(t(r[0]),t(r[1])):(e=r.map(t).reduce(function(r,t){var n;return n=r[r.length-1],n.length<2?n.push(t):r.push([t]),r},[[]]),e.map(function(r){return n.div(r[0],r[1]||n.create(1))}).reduce(function(r,t){return n.div(r,t)}))},exp:function(r,t){return t(r)},post:function(r){return r}})}catch(e){return t=e,{error:t.message}}},s="",f=function(r,t){return o(r,{missing:function(){return s},nil:function(){return""},error:function(r){return["",{error:r}]},num:function(r){return""+r},add:function(r,t){return r.map(t).reduce(function(r,t){return r+"+"+t})},minus:function(r,t){return"-"+t(r)},mul:function(r,t){return r.map(t).reduce(function(r,t){return r+"xx"+t})},over:function(r,t){var n,e;return n="",e=function(){return n="/"===n?"-:":"/"},r.map(t).reduce(function(r,t){return r+e()+t})},exp:function(r,t){return"("+t(r)+")"},post:function(n){var e,i;return n=n.replace(/\+-/g,"-").replace(/--/g,"+"),(null!=t?t.result:void 0)&&(i=u(r),i.error||(n!==i.toString()&&(n+="="+i),e=i.toMixedString(),e!==i.toString()&&(n+="="+e))),[n,i]}})},n=function(){function r(r){this.ast=r}return r.prototype.calc=function(){return u(this.ast)},r.prototype.render=function(r){return f(this.ast,r)},r}(),t.exports={parse:function(r){return new n(c(r))},placeholder:s}},{"./fractions":4,"./fractions-peg-parser":3}],3:[function(r,t){t.exports=function(){function r(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function t(r,t,n,e,u,i){this.message=r,this.expected=t,this.found=n,this.offset=e,this.line=u,this.column=i,this.name="SyntaxError"}function n(r){function n(t){function n(t,n,e){var u,i;for(u=n;e>u;u++)i=r.charAt(u),"\n"===i?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return tt!==t&&(tt>t&&(tt=0,nt={line:1,column:1,seenCR:!1}),n(nt,tt,t),tt=t),nt}function e(r){et>Z||(Z>et&&(et=Z,ut=[]),ut.push(r))}function u(e,u,i){function o(r){var t=1;for(r.sort(function(r,t){return r.description<t.description?-1:r.description>t.description?1:0});t<r.length;)r[t-1]===r[t]?r.splice(t,1):t++}function c(r,t){function n(r){function t(r){return r.charCodeAt(0).toString(16).toUpperCase()}return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+t(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+t(r)}).replace(/[\u0180-\u0FFF]/g,function(r){return"\\u0"+t(r)}).replace(/[\u1080-\uFFFF]/g,function(r){return"\\u"+t(r)})}var e,u,i,o=new Array(r.length);for(i=0;i<r.length;i++)o[i]=r[i].description;return e=r.length>1?o.slice(0,-1).join(", ")+" or "+o[r.length-1]:o[0],u=t?'"'+n(t)+'"':"end of input","Expected "+e+" but "+u+" found."}var a=n(i),s=i<r.length?r.charAt(i):null;return null!==u&&o(u),new t(null!==e?e:c(u,s),u,s,i,a.line,a.column)}function i(){var r;return r=o()}function o(){var t,n,u,i,o,a,s,f;if(it++,t=Z,n=c(),n!==A)if(u=l(),u!==A){if(i=[],o=Z,43===r.charCodeAt(Z)?(a=E,Z++):(a=A,0===it&&e(R)),a===A&&(45===r.charCodeAt(Z)?(a=M,Z++):(a=A,0===it&&e(D))),a!==A?(s=l(),s!==A?(f=c(),f!==A?(a=[a,s,f],o=a):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S),o!==A)for(;o!==A;)i.push(o),o=Z,43===r.charCodeAt(Z)?(a=E,Z++):(a=A,0===it&&e(R)),a===A&&(45===r.charCodeAt(Z)?(a=M,Z++):(a=A,0===it&&e(D))),a!==A?(s=l(),s!==A?(f=c(),f!==A?(a=[a,s,f],o=a):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S);else i=S;i!==A?(rt=t,n=q(n,i),t=n):(Z=t,t=S)}else Z=t,t=S;else Z=t,t=S;return t===A&&(t=c()),it--,t===A&&(n=A,0===it&&e(b)),t}function c(){var t,n,u,i,o,c,s,f;if(it++,t=Z,n=a(),n!==A)if(u=l(),u!==A){if(i=[],o=Z,42===r.charCodeAt(Z)?(c=j,Z++):(c=A,0===it&&e(k)),c!==A?(s=l(),s!==A?(f=a(),f!==A?(c=[c,s,f],o=c):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S),o!==A)for(;o!==A;)i.push(o),o=Z,42===r.charCodeAt(Z)?(c=j,Z++):(c=A,0===it&&e(k)),c!==A?(s=l(),s!==A?(f=a(),f!==A?(c=[c,s,f],o=c):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S);else i=S;i!==A?(rt=t,n=O(n,i),t=n):(Z=t,t=S)}else Z=t,t=S;else Z=t,t=S;return t===A&&(t=a()),it--,t===A&&(n=A,0===it&&e(U)),t}function a(){var t,n,u,i,o,c,a,f;if(it++,t=Z,n=s(),n!==A)if(u=l(),u!==A){if(i=[],o=Z,47===r.charCodeAt(Z)?(c=J,Z++):(c=A,0===it&&e(N)),c!==A?(a=l(),a!==A?(f=s(),f!==A?(c=[c,a,f],o=c):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S),o!==A)for(;o!==A;)i.push(o),o=Z,47===r.charCodeAt(Z)?(c=J,Z++):(c=A,0===it&&e(N)),c!==A?(a=l(),a!==A?(f=s(),f!==A?(c=[c,a,f],o=c):(Z=o,o=S)):(Z=o,o=S)):(Z=o,o=S);else i=S;i!==A?(rt=t,n=P(n,i),t=n):(Z=t,t=S)}else Z=t,t=S;else Z=t,t=S;return t===A&&(t=s()),it--,t===A&&(n=A,0===it&&e(H)),t}function s(){var t,n,u,i,c,a,s,p;return it++,t=f(),t===A&&(t=Z,45===r.charCodeAt(Z)?(n=M,Z++):(n=A,0===it&&e(D)),n===A&&(43===r.charCodeAt(Z)?(n=E,Z++):(n=A,0===it&&e(R))),n===A&&(n=T),n!==A?(u=l(),u!==A?(40===r.charCodeAt(Z)?(i=_,Z++):(i=A,0===it&&e(z)),i!==A?(c=l(),c!==A?(a=o(),a!==A?(s=l(),s!==A?(41===r.charCodeAt(Z)?(p=B,Z++):(p=A,0===it&&e(I)),p!==A?(rt=t,n=L(n,a),t=n):(Z=t,t=S)):(Z=t,t=S)):(Z=t,t=S)):(Z=t,t=S)):(Z=t,t=S)):(Z=t,t=S)):(Z=t,t=S)),it--,t===A&&(n=A,0===it&&e(Q)),t}function f(){var t,n,u,i,o;if(it++,t=Z,45===r.charCodeAt(Z)?(n=M,Z++):(n=A,0===it&&e(D)),n===A&&(43===r.charCodeAt(Z)?(n=E,Z++):(n=A,0===it&&e(R))),n===A&&(n=T),n!==A)if(u=l(),u!==A){if(i=[],G.test(r.charAt(Z))?(o=r.charAt(Z),Z++):(o=A,0===it&&e(K)),o!==A)for(;o!==A;)i.push(o),G.test(r.charAt(Z))?(o=r.charAt(Z),Z++):(o=A,0===it&&e(K));else i=S;i!==A?(rt=t,n=V(n,i),t=n):(Z=t,t=S)}else Z=t,t=S;else Z=t,t=S;return it--,t===A&&(n=A,0===it&&e($)),t}function l(){var t,n;for(it++,t=[],X.test(r.charAt(Z))?(n=r.charAt(Z),Z++):(n=A,0===it&&e(Y));n!==A;)t.push(n),X.test(r.charAt(Z))?(n=r.charAt(Z),Z++):(n=A,0===it&&e(Y));return it--,t===A&&(n=A,0===it&&e(W)),t}function p(r){return{type:"num",arg:r}}function h(r){return{type:"add",arg:r}}function d(r){return{type:"mul",arg:r}}function v(r){return{type:"over",arg:r}}function g(r){return{type:"exp",arg:r}}function m(r){return{type:"minus",arg:r}}function y(r){return r.map(function(r){return"-"===r[0]?m(r[2]):r[2]})}var x,C=arguments.length>1?arguments[1]:{},A={},w={S:i},F=i,b={type:"other",description:"expression"},S=A,E="+",R={type:"literal",value:"+",description:'"+"'},M="-",D={type:"literal",value:"-",description:'"-"'},q=function(r,t){return h([r].concat(y(t)))},U={type:"other",description:"term"},j="*",k={type:"literal",value:"*",description:'"*"'},O=function(r,t){return d([r].concat(y(t)))},H={type:"other",description:"fraction"},J="/",N={type:"literal",value:"/",description:'"/"'},P=function(r,t){return v([r].concat(y(t)))},Q={type:"other",description:"factor"},T=null,_="(",z={type:"literal",value:"(",description:'"("'},B=")",I={type:"literal",value:")",description:'")"'},L=function(r,t){var n=g(t);return"-"===r?m(n):n},$={type:"other",description:"integer"},G=/^[0-9]/,K={type:"class",value:"[0-9]",description:"[0-9]"},V=function(r,t){return p(parseInt((r||"")+t.join(""),10))},W={type:"other",description:"white-space"},X=/^[ \t\r\n]/,Y={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Z=0,rt=0,tt=0,nt={line:1,column:1,seenCR:!1},et=0,ut=[],it=0;if("startRule"in C){if(!(C.startRule in w))throw new Error("Can't start parsing from rule \""+C.startRule+'".');F=w[C.startRule]}if(x=F(),x!==A&&Z===r.length)return x;throw x!==A&&Z<r.length&&e({type:"end",description:"end of input"}),u(null,ut,et)}return r(t,Error),{SyntaxError:t,parse:n}}()},{}],4:[function(r,t){var n,e,u,i;i=function(r,t){var n;for(n=0;0!==t;)n=r%t,r=t,t=n;return Math.abs(r)},e=new Error("Division by zero!"),n=function(){function r(r,t){var n,u;if(null==t&&(t=1),0===t)throw e;0>t&&(u=[-r,-t],r=u[0],t=u[1]),n=i(r,t),this.n=r/n,this.d=t/n}return r.prototype.isProper=function(){return this.n<this.d},r.prototype.toFloat=function(){return this.n/this.d},r.prototype.toString=function(){return 1===this.d?""+this.n:this.n+"/"+this.d},r.prototype.toMixedString=function(){return this.isProper()?this.toString():this.n%this.d===0?""+Math.floor(this.n/this.d):Math.floor(this.n/this.d)+" "+this.n%this.d+"/"+this.d},r}(),u=function(r,t){return new n(r,t)},n.create=function(r,t){return u(r,t)},n.mixed=function(r,t,n){return u(t+r*n,n)},n.add=function(r,t){var n,e,i,o,c;return c=[r.n,r.d,t.n,t.d],n=c[0],e=c[1],i=c[2],o=c[3],u(n*o+i*e,e*o)},n.minus=function(r){var t,n,e;return e=[r.n,r.d],n=e[0],t=e[1],u(-n,t)},n.mul=function(r,t){var n,e,i,o,c;return c=[r.n,r.d,t.n,t.d],n=c[0],e=c[1],i=c[2],o=c[3],u(n*i,e*o)},n.div=function(r,t){var n,e,i,o,c;return c=[r.n,r.d,t.n,t.d],n=c[0],e=c[1],i=c[2],o=c[3],u(n*o,e*i)},t.exports=n},{}]},{},[1]);
//# sourceMappingURL=main.min.js.map