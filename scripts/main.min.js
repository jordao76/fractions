!function e(i,u,o){function c(t,r){if(!u[t]){if(!i[t]){var n="function"==typeof require&&require;if(!r&&n)return n(t,!0);if(a)return a(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}n=u[t]={exports:{}},i[t][0].call(n.exports,function(r){return c(i[t][1][r]||r)},n,n.exports,e,i,u,o)}return u[t].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)c(o[r]);return c}({1:[function(r,t,n){var s=r("./fractions-parser");t.exports=function(r){var n=r.output,e=r.onError,i={curr:"",isRes:!1,val:function(r,t){return null==t&&(t=!1),null!=r&&(this.curr=r,this.isRes=t),this.curr},hasResult:function(){return this.isRes}},r=function(r){var t,n,e;return!("C"!==r&&("="===r?(t=i.val(),(n=s.parse(t)).ast.error||null!=(e=n.ast.incomplete)&&e.numbers):(t=i.val()+r)&&(n=s.parse(t)).ast.error))},t=function(r){return"C"===r&&i.val(r=""),("="===r?a:(i.hasResult()&&r.match(/\d/)?i.val(r):i.val(i.val()+r),c))()},u=function(){var r;return(i.hasResult()?o:(r=i.val(),i.val(r.slice(0,-1)),c))()},o=function(){return n("")},c=function(){var r,t=i.val();return t.trim()?null!=(t=s.parse(t)).ast.error?u():(null!=t.ast.incomplete&&(r={incomplete:t.ast.incomplete}),n(t.render(),r)):o()},a=function(){var r,t=i.val();return t.trim()?0<(null!=(r=(t=s.parse(t)).ast.incomplete)?r.numbers:void 0)?void 0:(r=t.render({result:!0})).error?e(r.error):(t=t.calc(),n(r,{decimal:t.toFloat()}),i.val(t.toString(),!0)):o()};return o(),{canInput:r,input:t,uninput:u}}},{"./fractions-parser":2}],2:[function(r,t,n){var e,u,i,o,c,l,a,s;function f(r){this.ast=r}i=r("./fractions"),l=r("./fractions-peg-parser"),c=function(t){try{return l.parse(t)}catch(r){return s(t,r)}},s=function(r,t){var n,e,i,u,o=function(r){var t=function(r){if(r.arg){if(r.arg.length)return"missing"===r.arg[r.arg.length-1].type?t(r.arg[r.arg.length-2]):t(r.arg[r.arg.length-1]);if("num"!==r.type)return t(r.arg)}return r},r=t(r);return-1===r.arg?(r.type="minus",r.arg={type:"missing"}):(r.type="missing",delete r.arg)},c=r,a=0,s=0;for(r.match(/[^\d\)\s]+$/)?(c+="1",++s):r.match(/\s\d+$/)?(c+="/1",++a,++s):r.match(/\s$/)&&(c+="1/1",++a,s+=2),u=(i=(r.match(/\(/g)||[]).length)-(e=(r.match(/\)/g)||[]).length);i-- >e;)c+=")";if(r!==c)try{if(n=l.parse(c),0<u||0<a||0<s)for(n.incomplete={},0<u&&(n.incomplete.parens=u),0<a&&(n.incomplete.symbols=a),0<s&&(n.incomplete.numbers=s);0<s--;)o(n);return n}catch(r){}return{error:t.message}},o=function(r,t){var n,e;return r?null!=r.error?t.error(r.error):(n=function(r,t){return null!=r.map?r.map(t):t(r)},t.post((e=function(r){return"num"===r.type||"missing"===r.type?t[r.type](r.arg):t[r.type](n(r.arg,e))})(r))):null},u=function(r){var n,t;if(null!=(t=r.incomplete)&&t.numbers)return{error:"incomplete expression"};try{return n=i,o(r,{error:function(){return""},num:function(r){return n.create(r)},add:function(r){return r.reduce(function(r,t){return n.add(r,t)})},minus:function(r){return n.minus(r)},mul:function(r){return r.reduce(function(r,t){return n.mul(r,t)})},div:function(r){return n.reciprocal(r)},mixed:function(r){var r=r.map(function(r){return r.n}),t=r[0];return n.mixed(t,r[1],r[2])},over:function(r){var r=r.map(function(r){return r.n}),t=r[0];return n.create(t,r[1])},exp:function(r){return r},post:function(r){return r}})}catch(r){return{error:r.message}}},a=function(i,t){var n=function(r){var t,n,e=u(i);return null!=e.error?{error:e.error}:((n=r)!==(t=a(c(e.toString())))&&(n+=" = "+t),(e=a(c(e.toMixedString())))!==t&&e!==r&&(n+=" = "+e),n)};return o(i,{error:function(r){return{error:r}},missing:function(){return""},num:function(r){return""+r},add:function(r){return r.reduce(function(r,t){return r+" + "+t})},minus:function(r){return"-"+r},mul:function(r){return r.reduce(function(r,t){return r+" \\times "+t})},div:function(r){return"\\div "+r},mixed:function(r){return r[0]+" \\frac{"+(r[1]||"\\circ")+"}{"+(r[2]||"\\circ")+"}"},over:function(r){var t=r[0],r=r[1];return null!=r?"\\frac{"+t+"}{"+(r||"\\circ")+"}":t},exp:function(r){return"\\left( "+r+" \\right)"},post:function(r){return r=r.replace(/\\times \\div/g,"\\div").replace(/\+(\s)?-/g,"-$1").replace(/-(\s)?-/g,"+$1").replace(/\s{2,}/g," "),null!=t&&t.result?n(r):r}})},f.prototype.calc=function(){return u(this.ast)},f.prototype.render=function(r){return a(this.ast,r)},e=f,t.exports={parse:function(r){return new e(c(r))}}},{"./fractions":4,"./fractions-peg-parser":3}],3:[function(r,t,n){function Z(r,t,n,e){this.message=r,this.expected=t,this.found=n,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Z)}function e(){this.constructor=i}var i;t.exports=(i=Z,t=Error,e.prototype=t.prototype,i.prototype=new e,{SyntaxError:Z,parse:function(o){var r=1<arguments.length?arguments[1]:{},c={},t={S:S},n=S,a={type:"other",description:"expression"},s="+",l={type:"literal",value:"+",description:'"+"'},f="-",p={type:"literal",value:"-",description:'"-"'},d=function(r,t){return{type:"add",arg:[r].concat(t.map(function(r){if("-"===r[0]){if("num"!==r[1].type)return q(r[1]);r[1].arg=-r[1].arg}return r[1]}))}},h={type:"other",description:"term"},m="*",g={type:"literal",value:"*",description:'"*"'},v="÷",y={type:"literal",value:"÷",description:'"\\xF7"'},I=function(r,t){return{type:"mul",arg:[r].concat(t.map(function(r){return"÷"===r[0]?{type:"div",arg:r[1]}:r[1]}))}},T={type:"other",description:"fraction"},u="/",x={type:"literal",value:"/",description:'"/"'},U=function(r,t){return{type:"over",arg:[r,t]}},j=" ",O={type:"literal",value:" ",description:'" "'},H=function(r,t,n){return{type:"mixed",arg:[r,t,n]}},L={type:"other",description:"factor"},N="(",P={type:"literal",value:"(",description:'"("'},Q=")",z={type:"literal",value:")",description:'")"'},B=function(r,t){t={type:"exp",arg:t};return"-"===r?q(t):t},G={type:"other",description:"integer"},K=function(r,t){return _(parseInt((r||"")+t.arg,10))},V={type:"other",description:"unsigned integer"},e=/^[0-9]/,i={type:"class",value:"[0-9]",description:"[0-9]"},W=function(r){return _(parseInt(r.join(""),10))},C=0,A=[{line:1,column:1,seenCR:!1}],b=0,R=[],w=0;if("startRule"in r){if(!(r.startRule in t))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=t[r.startRule]}function F(r){var t,n,e=A[r];if(e)return e;for(t=r-1;!A[t];)t--;for(e={line:(e=A[t]).line,column:e.column,seenCR:e.seenCR};t<r;)"\n"===(n=o.charAt(t))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),t++;return A[r]=e}function X(r,t){var n=F(r),e=F(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function E(r){C<b||(b<C&&(b=C,R=[]),R.push(r))}function Y(r,t,n,e){if(null!==t){var i=t,u=1;for(i.sort(function(r,t){return r.description<t.description?-1:r.description>t.description?1:0});u<i.length;)i[u-1]===i[u]?i.splice(u,1):u++}return new Z(null!==r?r:((r,t)=>{for(var n=new Array(r.length),e=0;e<r.length;e++)n[e]=r[e].description;function i(r){return r.charCodeAt(0).toString(16).toUpperCase()}return"Expected "+(1<r.length?n.slice(0,-1).join(", ")+" or "+n[r.length-1]:n[0])+" but "+(t?'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+i(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+i(r)}).replace(/[\u0100-\u0FFF]/g,function(r){return"\\u0"+i(r)}).replace(/[\u1000-\uFFFF]/g,function(r){return"\\u"+i(r)})+'"':"end of input")+" found."})(t,n),t,n,e)}function S(){return M()}function M(){var r,t,n,e,i,u;if(w++,r=C,(t=$())!==c){if(n=[],e=C,43===o.charCodeAt(C)?(i=s,C++):(i=c,0===w&&E(l)),i===c&&(45===o.charCodeAt(C)?(i=f,C++):(i=c,0===w&&E(p))),(e=i!==c&&(u=$())!==c?i=[i,u]:(C=e,c))!==c)for(;e!==c;)n.push(e),e=C,43===o.charCodeAt(C)?(i=s,C++):(i=c,0===w&&E(l)),i===c&&(45===o.charCodeAt(C)?(i=f,C++):(i=c,0===w&&E(p))),e=i!==c&&(u=$())!==c?i=[i,u]:(C=e,c);else n=c;r=n!==c?t=d(t,n):(C=r,c)}else C=r,r=c;return r===c&&(r=$()),w--,r===c&&(t=c,0===w)&&E(a),r}function $(){var r,t,n,e,i,u;if(w++,r=C,(t=D())!==c){if(n=[],e=C,42===o.charCodeAt(C)?(i=m,C++):(i=c,0===w&&E(g)),i===c&&(247===o.charCodeAt(C)?(i=v,C++):(i=c,0===w&&E(y))),(e=i!==c&&(u=D())!==c?i=[i,u]:(C=e,c))!==c)for(;e!==c;)n.push(e),e=C,42===o.charCodeAt(C)?(i=m,C++):(i=c,0===w&&E(g)),i===c&&(247===o.charCodeAt(C)?(i=v,C++):(i=c,0===w&&E(y))),e=i!==c&&(u=D())!==c?i=[i,u]:(C=e,c);else n=c;r=n!==c?t=I(t,n):(C=r,c)}else C=r,r=c;return r===c&&(r=D()),w--,r===c&&(t=c,0===w)&&E(h),r}function D(){var r,t,n,e,i;return w++,r=C,(r=(t=k())!==c&&(47===o.charCodeAt(C)?(i=u,C++):(i=c,0===w&&E(x)),i!==c)&&(n=k())!==c?t=U(t,n):(C=r,c))===c&&(r=C,(r=(t=k())!==c&&(32===o.charCodeAt(C)?(i=j,C++):(i=c,0===w&&E(O)),i!==c)&&(n=J())!==c&&(47===o.charCodeAt(C)?(e=u,C++):(e=c,0===w&&E(x)),e!==c)&&(i=k())!==c?t=H(t,n,i):(C=r,c))===c)&&(r=(()=>{var r,t,n,e;return w++,(r=k())===c&&(r=C,45===o.charCodeAt(C)?(t=f,C++):(t=c,0===w&&E(p)),t===c&&(43===o.charCodeAt(C)?(t=s,C++):(t=c,0===w&&E(l))),r=(t=t===c?null:t)!==c&&(40===o.charCodeAt(C)?(n=N,C++):(n=c,0===w&&E(P)),n!==c)&&(n=M())!==c&&(41===o.charCodeAt(C)?(e=Q,C++):(e=c,0===w&&E(z)),e!==c)?t=B(t,n):(C=r,c)),w--,r===c&&(t=c,0===w)&&E(L),r})()),w--,r===c&&(t=c,0===w)&&E(T),r}function k(){var r,t,n;return w++,r=C,45===o.charCodeAt(C)?(t=f,C++):(t=c,0===w&&E(p)),t===c&&(43===o.charCodeAt(C)?(t=s,C++):(t=c,0===w&&E(l))),r=(t=t===c?null:t)!==c&&(n=J())!==c?t=K(t,n):(C=r,c),w--,r===c&&(t=c,0===w)&&E(G),r}function J(){var r,t,n;if(w++,r=C,t=[],e.test(o.charAt(C))?(n=o.charAt(C),C++):(n=c,0===w&&E(i)),n!==c)for(;n!==c;)t.push(n),e.test(o.charAt(C))?(n=o.charAt(C),C++):(n=c,0===w&&E(i));else t=c;return t!==c&&(t=W(t)),w--,(r=t)===c&&(t=c,0===w)&&E(V),r}function _(r){return{type:"num",arg:r}}function q(r){return{type:"minus",arg:r}}if((t=n())!==c&&C===o.length)return t;throw t!==c&&C<o.length&&E({type:"end",description:"end of input"}),Y(null,R,b<o.length?o.charAt(b):null,X(b,b<o.length?b+1:b))}})},{}],4:[function(r,t,n){var e,i;function u(r,t){var n;if(0===(t=null==t?1:t))throw e;t<0&&(r=(n=[-r,-t])[0],t=n[1]),n=i(r,t),this.n=r/n,this.d=t/n}i=function(r,t){for(var n;0!==t;)n=r%t,r=t,t=n;return Math.abs(r)},e=new Error("Division by zero!"),u.prototype.isProper=function(){return this.n<this.d},u.prototype.toFloat=function(){return this.n/this.d},u.prototype.toString=function(){return 1===this.d?""+this.n:this.n+"/"+this.d},u.prototype.toMixedString=function(){return this.isProper()?this.toString():this.n%this.d==0?""+Math.floor(this.n/this.d):Math.floor(this.n/this.d)+" "+this.n%this.d+"/"+this.d},u.create=function(r,t){return new u(r,t)},u.mixed=function(r,t,n){return this.create(t+r*n,n)},u.add=function(r,t){var r=[r.n,r.d,t.n,t.d],t=r[1],n=r[3];return this.create(r[0]*n+r[2]*t,t*n)},u.minus=function(r){r=[r.n,r.d];return this.create(-r[0],r[1])},u.mul=function(r,t){r=[r.n,r.d,t.n,t.d];return this.create(r[0]*r[2],r[1]*r[3])},u.div=function(r,t){r=[r.n,r.d,t.n,t.d];return this.create(r[0]*r[3],r[1]*r[2])},u.reciprocal=function(r){r=[r.n,r.d];return this.create(r[1],r[0])},t.exports=u},{}],5:[function(g,r,t){var v=jQuery;v(function(){var n,r=v("#calculator"),e=v("#output"),i=v("#decimal"),u=v("#buffer"),o=v("#parsed"),c=function(){return v(".MathJax_Display").css("margin","0").css("text-align","right")},a=function(r){var t;if(0!==r)return t=v("#output .MathJax_Display span").filter(function(r,t){return")"===v(t).text()}),v(t.slice(-r)).addClass("dimmed")},t=function(){return v("#output .MathJax_Display span").filter(function(r,t){return"∘"===v(t).text()})},s=function(){return t().addClass("dimmed")},l=function(){return t().last().parent().parent().addClass("dimmed").children("span").filter(function(r,t){return v(t).text().match(/\d+/)}).css("color","#333")},f=function(t,n){return i.text(null!=(null!=n?n.decimal:void 0)?n.decimal:""),MathJax.Hub.Queue(function(){return o.text(t),u.text("$$"+t+"$$"),MathJax.Hub.Typeset(u.get(),function(){var r;return o.text()===t&&e.html(u.html()),c(),a((null!=n&&null!=(r=n.incomplete)?r.parens:void 0)||0),(0<(null!=n&&null!=(r=n.incomplete)?r.symbols:void 0)?l:s)(),v("#output").scrollLeft(1e9)})})},p=g("./calculator")({output:f,onError:function(r){return alert(r)}}),d=function(r){return r.data("symbol")||r.text()},h=v(".btn"),m=h.map(function(){return d(v(this)).charCodeAt(0)});return r.keypress(function(r){var r=13===r.which?"=":String.fromCharCode(r.which).toUpperCase(),t=r.charCodeAt(0);if(-1!==m.index(t))return p.input(r),n()}).keydown(function(r){if(8===r.which)return p.uninput(),n(),r.preventDefault()}),h.click(function(){return p.input(d(v(this))),n()}),(n=function(){return h.each(function(){return p.canInput(d(v(this)))?this.removeAttribute("disabled"):this.setAttribute("disabled","disabled")})})(),r.focus()})},{"./calculator":1}]},{},[5]);
//# sourceMappingURL=main.min.js.map
