{"version":3,"sources":["main.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"MathJax","$","Parser","$input","$output","$buffer","$parsed","$decimal","output","Hub","Queue","text","Typeset","get","html","last","butFirstClear","process","exp","val","trim","parsed","parse","render","calc","result","error","toFloat","toString","keyup","which","on","focus","jQuery","./fractions-parser",2,"module","fraction","parser","ast","missingNumber","recur","arg","type","newExp","match","openParens","closeParens","message","interpret","interpreter","nil","post","missing","num","create","add","map","reduce","p","minus","mul","over","div","pairs","push","placeholder","rendered","curr","op","replace","Parsed","this","prototype","./fractions","./fractions-peg-parser",3,"peg$subclass","child","parent","ctor","constructor","SyntaxError","expected","found","offset","line","column","name","input","peg$computePosDetails","pos","advance","details","startPos","endPos","ch","charAt","seenCR","peg$cachedPos","peg$cachedPosDetails","peg$fail","peg$maxFailPos","peg$currPos","peg$maxFailExpected","peg$buildException","cleanupExpected","sort","b","description","splice","buildMessage","stringEscape","hex","charCodeAt","toUpperCase","expectedDesc","foundDesc","expectedDescs","Array","slice","join","posDetails","peg$parseS","s0","peg$parseE","s1","s2","s3","s4","s5","peg$silentFails","peg$parseT","peg$FAILED","peg$c3","peg$c4","peg$c5","peg$c6","peg$c1","peg$reportedPos","peg$c7","peg$c0","peg$parseF","peg$c9","peg$c10","peg$c11","peg$c8","peg$parseR","peg$c13","peg$c14","peg$c15","peg$c12","peg$parseI","peg$c17","peg$c18","peg$c19","peg$c20","peg$c21","peg$c22","peg$c16","peg$c24","test","peg$c25","peg$c26","peg$c23","terms","peg$result","options","arguments","peg$startRuleFunctions","S","peg$startRuleFunction","value","left","right","concat","sign","expression","digits","parseInt","startRule",4,"gcd","d","remainder","Math","abs","div0","Fraction","c"],"mappings":"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","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/* global MathJax,jQuery,require */\n(function(MathJax, $, Parser){\r\n'use strict';\r\n\r\n$(function(){\r\n\n  var\n    $input = $('#input'),\r\n    $output = $('#output'),\r\n    $buffer = $('#buffer'),\r\n    $parsed = $('#parsed'),\r\n    $decimal = $('#decimal');\r\n\n  var output = function(s) {\r\n    MathJax.Hub.Queue(function(){\r\n      $parsed.text(s);\r\n      $buffer.text('`' + s + '`');\r\n      MathJax.Hub.Typeset($buffer.get(), function() {\r\n        if ($parsed.text() === s) {\r\n          $output.html($buffer.html());\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  var last = null;\r\n\n  var butFirstClear = function() {\n    $decimal.text('');\n    output('');\n    last = '';\n  };\n\n  var process = function() {\n    var exp = $input.val();\n    if (!exp.trim()) return butFirstClear();\n    if (exp !== last) {\n      var parsed = Parser.parse(exp);\n      output(parsed.render());\n      $decimal.text('');\n      last = exp;\n    }\n  };\n\n  var calc = function() {\n    var exp = $input.val();\n    if (!exp.trim()) return butFirstClear();\n    var parsed = Parser.parse(exp);\n    var result = parsed.calc();\n    output(parsed.render(result));\n    if (!result.error) {\n      $decimal.text(result.toFloat());\n      $input.val(last = result.toString());\n    }\n  };\n\n  $input.keyup(function(e){if(e.which===13)calc();}); // 13 is <ENTER>\r\n  $input.on('input propertychange', process);\n  $input.focus();\n\r\n});\r\n\r\n}(MathJax, jQuery, require('./fractions-parser')));\r\n\n},{\"./fractions-parser\":2}],2:[function(require,module,exports){\n/* global module,require */\nmodule.exports = (function(fraction, parser){\r\n'use strict';\r\n\r\nvar parse = function(exp, error) {\r\n  try {\r\n    var ast = parser.parse(exp);\n    if (error && error.missingNumber) {\n      // replace last number with a 'missing' type\n      var recur = function(o){\n        if (o.arg) {\n          if (o.arg.length) {\n            return recur(o.arg[o.arg.length-1]);\r\n          }\n          else if (o.type !== 'num') {\n            return recur(o.arg);\r\n          }\r\n        }\r\n        return o;\n      };\n      var last = recur(ast);\n      if (last.arg === -1) {\n        last.type = 'minus';\n        last.arg = { type: 'missing' };\n      }\n      else {\n        last.type = 'missing';\n        delete last.arg;\n      }\n    }\n    return ast;\n  } catch(e) {\r\n    // try to create a valid expression\r\n    var newExp = exp;\n\n    // if it ends with a non-number, see if adding a number works\n    if (newExp.match(/\\D+$/)) {\n      newExp += '1';\n      e.missingNumber = true;\r\n    }\r\n\r\n    // balance close parenthesis\r\n    var openParens = (newExp.match(/\\(/g)||[]).length;\r\n    var closeParens = (newExp.match(/\\)/g)||[]).length;\r\n    while (openParens-- > closeParens) { newExp += ')'; }\r\n\r\n    if (exp !== newExp) {\n      return parse(newExp, e);\r\n    }\r\n    return { error:e.message };\r\n  }\r\n};\r\n\r\nvar interpret = function(ast, interpreter) {\r\n  if (!ast) return interpreter.nil();\r\n  if (ast.error) return interpreter.error(ast.error);\r\n  var recur = function(o){return interpreter[o.type](o.arg,recur);};\r\n  return interpreter.post(recur(ast));\r\n};\r\n\r\n// calculate AST result\r\nvar calc = function(ast) {\r\n  try {\r\n    var f = fraction;\r\n    return interpret(ast, {\n      missing:function(){throw new Error('incomplete expression');}, // TODO: put string in a variable!\r\n      nil:function(){return '';},\r\n      error:function(){return '';},\r\n      num:function(n){return f.create(n);},\r\n      add:function(a,recur){return a.map(recur).reduce(function(p,e){return f.add(p,e);});},\r\n      minus:function(e,recur){return f.minus(recur(e));},\r\n      mul:function(a,recur){return a.map(recur).reduce(function(p,e){return f.mul(p,e);});},\r\n      over:function(a,recur){\r\n        if (a.length===2) return f.div(recur(a[0]),recur(a[1]));\r\n        // do pair-wise association, e.g. \"1 / 2 / 3 / 4 / 5\" => \"(1 / 2) / (3 / 4) / 5\"\r\n        var pairs = a.map(recur).reduce(\r\n          function(p,e){\r\n            var last = p[p.length-1];\r\n            if (last.length < 2) { last.push(e); } else { p.push([e]); }\r\n            return p;\r\n          },[[]]\r\n        );\r\n        return pairs.\r\n          map(function(e){return f.div(e[0],e[1]||f.create(1));}).\r\n          reduce(function(p,e){return f.div(p,e);});\r\n      },\r\n      exp:function(e,recur){return recur(e);},\r\n      post:function(r){return r;}\r\n    });\r\n  } catch(e) {\r\n    return { error: e.message };\r\n  }\r\n};\r\n\r\n// render AST as AsciiMath\r\nvar placeholder = '';\nvar render = function(ast, result) {\r\n  var rendered = interpret(ast, {\n    missing:function(){return placeholder;},\r\n    nil:function(){return '';},\r\n    error:function(){return 'bb\"Error\"';},\r\n    num:function(n){return ''+n;},\r\n    add:function(a,recur){return a.map(recur).reduce(function(p,e){return p+'+'+e;});},\r\n    minus:function(e,recur){return '-'+recur(e);},\r\n    mul:function(a,recur){return a.map(recur).reduce(function(p,e){return p+'xx'+e;});},\r\n    over:function(a,recur){\r\n      // do pair-wise association, e.g. \"1 / 2 / 3 / 4 / 5\" => \"(1 / 2) -: (3 / 4) -: 5\"\r\n      var curr = '', op = function(){return curr=(curr==='/'?'-:':'/');};\r\n      return a.map(recur).reduce(function(p,e){return p+op()+e;});\r\n    },\r\n    exp:function(e,recur){return '('+recur(e)+')';},\r\n    post:function(s){return s.replace(/\\+-/g,'-').replace(/--/g,'+');}\r\n  });\r\n  if (result) {\r\n    if (result.error) { rendered += ' = bb\"' + result.error + '\"'; }\r\n    else { rendered += ' = ' + result; }\r\n  }\r\n  return rendered;\r\n};\r\n\nvar Parsed = function(ast){\n  this.ast = ast;\n};\nParsed.prototype = {\n  calc: function(){return calc(this.ast);},\n  render: function(result){return render(this.ast, result);}\n};\n\r\nreturn {\r\n  parse: function(e){return new Parsed(parse(e));},\n  placeholder: placeholder // TODO: rename?\r\n};\r\n\r\n}(require('./fractions'), require('./fractions-peg-parser')));\r\n\n},{\"./fractions\":4,\"./fractions-peg-parser\":3}],3:[function(require,module,exports){\nmodule.exports = (function() {\n  /*\n   * Generated by PEG.js 0.8.0.\n   *\n   * http://pegjs.majda.cz/\n   */\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function SyntaxError(message, expected, found, offset, line, column) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.offset   = offset;\n    this.line     = line;\n    this.column   = column;\n\n    this.name     = \"SyntaxError\";\n  }\n\n  peg$subclass(SyntaxError, Error);\n\n  function parse(input) {\n    var options = arguments.length > 1 ? arguments[1] : {},\n\n        peg$FAILED = {},\n\n        peg$startRuleFunctions = { S: peg$parseS },\n        peg$startRuleFunction  = peg$parseS,\n\n        peg$c0 = { type: \"other\", description: \"expression\" },\n        peg$c1 = peg$FAILED,\n        peg$c2 = [],\n        peg$c3 = \"+\",\n        peg$c4 = { type: \"literal\", value: \"+\", description: \"\\\"+\\\"\" },\n        peg$c5 = \"-\",\n        peg$c6 = { type: \"literal\", value: \"-\", description: \"\\\"-\\\"\" },\n        peg$c7 = function(left, right) { return add([left].concat(terms(right))); },\n        peg$c8 = { type: \"other\", description: \"term\" },\n        peg$c9 = \"*\",\n        peg$c10 = { type: \"literal\", value: \"*\", description: \"\\\"*\\\"\" },\n        peg$c11 = function(left, right) { return mul([left].concat(terms(right))); },\n        peg$c12 = { type: \"other\", description: \"fraction\" },\n        peg$c13 = \"/\",\n        peg$c14 = { type: \"literal\", value: \"/\", description: \"\\\"/\\\"\" },\n        peg$c15 = function(left, right) { return over([left].concat(terms(right))); },\n        peg$c16 = { type: \"other\", description: \"factor\" },\n        peg$c17 = null,\n        peg$c18 = \"(\",\n        peg$c19 = { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n        peg$c20 = \")\",\n        peg$c21 = { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n        peg$c22 = function(sign, expression) { \r\n            var r = exp(expression);\r\n            return sign==='-'?minus(r):r; \r\n          },\n        peg$c23 = { type: \"other\", description: \"integer\" },\n        peg$c24 = /^[0-9]/,\n        peg$c25 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n        peg$c26 = function(sign, digits) { return num(parseInt((sign||\"\")+digits.join(\"\"), 10)); },\n\n        peg$currPos          = 0,\n        peg$reportedPos      = 0,\n        peg$cachedPos        = 0,\n        peg$cachedPosDetails = { line: 1, column: 1, seenCR: false },\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$reportedPos, peg$currPos);\n    }\n\n    function offset() {\n      return peg$reportedPos;\n    }\n\n    function line() {\n      return peg$computePosDetails(peg$reportedPos).line;\n    }\n\n    function column() {\n      return peg$computePosDetails(peg$reportedPos).column;\n    }\n\n    function expected(description) {\n      throw peg$buildException(\n        null,\n        [{ type: \"other\", description: description }],\n        peg$reportedPos\n      );\n    }\n\n    function error(message) {\n      throw peg$buildException(message, null, peg$reportedPos);\n    }\n\n    function peg$computePosDetails(pos) {\n      function advance(details, startPos, endPos) {\n        var p, ch;\n\n        for (p = startPos; p < endPos; p++) {\n          ch = input.charAt(p);\n          if (ch === \"\\n\") {\n            if (!details.seenCR) { details.line++; }\n            details.column = 1;\n            details.seenCR = false;\n          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n            details.line++;\n            details.column = 1;\n            details.seenCR = true;\n          } else {\n            details.column++;\n            details.seenCR = false;\n          }\n        }\n      }\n\n      if (peg$cachedPos !== pos) {\n        if (peg$cachedPos > pos) {\n          peg$cachedPos = 0;\n          peg$cachedPosDetails = { line: 1, column: 1, seenCR: false };\n        }\n        advance(peg$cachedPosDetails, peg$cachedPos, pos);\n        peg$cachedPos = pos;\n      }\n\n      return peg$cachedPosDetails;\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildException(message, expected, pos) {\n      function cleanupExpected(expected) {\n        var i = 1;\n\n        expected.sort(function(a, b) {\n          if (a.description < b.description) {\n            return -1;\n          } else if (a.description > b.description) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n        while (i < expected.length) {\n          if (expected[i - 1] === expected[i]) {\n            expected.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n      }\n\n      function buildMessage(expected, found) {\n        function stringEscape(s) {\n          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\n          return s\n            .replace(/\\\\/g,   '\\\\\\\\')\n            .replace(/\"/g,    '\\\\\"')\n            .replace(/\\x08/g, '\\\\b')\n            .replace(/\\t/g,   '\\\\t')\n            .replace(/\\n/g,   '\\\\n')\n            .replace(/\\f/g,   '\\\\f')\n            .replace(/\\r/g,   '\\\\r')\n            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n            .replace(/[\\u0180-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n            .replace(/[\\u1080-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n        }\n\n        var expectedDescs = new Array(expected.length),\n            expectedDesc, foundDesc, i;\n\n        for (i = 0; i < expected.length; i++) {\n          expectedDescs[i] = expected[i].description;\n        }\n\n        expectedDesc = expected.length > 1\n          ? expectedDescs.slice(0, -1).join(\", \")\n              + \" or \"\n              + expectedDescs[expected.length - 1]\n          : expectedDescs[0];\n\n        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\n        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n      }\n\n      var posDetails = peg$computePosDetails(pos),\n          found      = pos < input.length ? input.charAt(pos) : null;\n\n      if (expected !== null) {\n        cleanupExpected(expected);\n      }\n\n      return new SyntaxError(\n        message !== null ? message : buildMessage(expected, found),\n        expected,\n        found,\n        pos,\n        posDetails.line,\n        posDetails.column\n      );\n    }\n\n    function peg$parseS() {\n      var s0;\n\n      s0 = peg$parseE();\n\n      return s0;\n    }\n\n    function peg$parseE() {\n      var s0, s1, s2, s3, s4, s5;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parseT();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 43) {\n          s4 = peg$c3;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c4); }\n        }\n        if (s4 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 45) {\n            s4 = peg$c5;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c6); }\n          }\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseT();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c1;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$c1;\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 43) {\n              s4 = peg$c3;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s4 === peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 45) {\n                s4 = peg$c5;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c6); }\n              }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseT();\n              if (s5 !== peg$FAILED) {\n                s4 = [s4, s5];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$c1;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$c1;\n            }\n          }\n        } else {\n          s2 = peg$c1;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c7(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c1;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c1;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseT();\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c0); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseT() {\n      var s0, s1, s2, s3, s4, s5;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parseF();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 42) {\n          s4 = peg$c9;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c10); }\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseF();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c1;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$c1;\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 42) {\n              s4 = peg$c9;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c10); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseF();\n              if (s5 !== peg$FAILED) {\n                s4 = [s4, s5];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$c1;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$c1;\n            }\n          }\n        } else {\n          s2 = peg$c1;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c11(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c1;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c1;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseF();\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseF() {\n      var s0, s1, s2, s3, s4, s5;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parseR();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 47) {\n          s4 = peg$c13;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c14); }\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseR();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c1;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$c1;\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 47) {\n              s4 = peg$c13;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c14); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseR();\n              if (s5 !== peg$FAILED) {\n                s4 = [s4, s5];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$c1;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$c1;\n            }\n          }\n        } else {\n          s2 = peg$c1;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c15(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c1;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c1;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseR();\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c12); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseR() {\n      var s0, s1, s2, s3, s4;\n\n      peg$silentFails++;\n      s0 = peg$parseI();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s1 = peg$c5;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s1 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 43) {\n            s1 = peg$c3;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n        }\n        if (s1 === peg$FAILED) {\n          s1 = peg$c17;\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 40) {\n            s2 = peg$c18;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c19); }\n          }\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parseE();\n            if (s3 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 41) {\n                s4 = peg$c20;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c21); }\n              }\n              if (s4 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c22(s1, s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c1;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c1;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c1;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c1;\n        }\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c16); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseI() {\n      var s0, s1, s2, s3;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 45) {\n        s1 = peg$c5;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      if (s1 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 43) {\n          s1 = peg$c3;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c4); }\n        }\n      }\n      if (s1 === peg$FAILED) {\n        s1 = peg$c17;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c24.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c25); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c24.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c25); }\n            }\n          }\n        } else {\n          s2 = peg$c1;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c26(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c1;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c1;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c23); }\n      }\n\n      return s0;\n    }\n\n\r\n      function num(n){return {type:'num',arg:n};}\r\n      function add(a){return {type:'add',arg:a};}\r\n      function mul(a){return {type:'mul',arg:a};}\r\n      function over(a){return {type:'over',arg:a};}\r\n      function exp(e){return {type:'exp',arg:e};}\r\n\r\n      function minus(e){return {type:\"minus\",arg:e};}\r\n\r\n      function terms(a){return a.map(function(e){return e[0]===\"-\"?minus(e[1]):e[1];});}\r\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail({ type: \"end\", description: \"end of input\" });\n      }\n\n      throw peg$buildException(null, peg$maxFailExpected, peg$maxFailPos);\n    }\n  }\n\n  return {\n    SyntaxError: SyntaxError,\n    parse:       parse\n  };\n})();\n},{}],4:[function(require,module,exports){\n/* global module */\nmodule.exports = (function(){\r\n'use strict';\r\n\r\nvar gcd = function(n, d) {\r\n  var remainder = 0;\r\n  while (d !== 0) {\r\n    remainder = n % d;\r\n    n = d;\r\n    d = remainder;\r\n  }\r\n  return Math.abs(n);\r\n};\r\n\nvar div0 = new Error('Division by zero!');\n\nvar Fraction = function(n, d) {\n  if (d === 0) throw div0;\n  d = d || 1;\n  if (d < 0) {\n    n = -n;\n    d = -d;\r\n  }\n  var div = gcd(n, d);\n  this.n = n / div;\n  this.d = d / div;\n};\n\nvar fraction = function(n, d) { return new Fraction(n, d); };\n\nFraction.create = function(n, d) {\n  return fraction(n, d);\n};\nFraction.add = function(l, r) {\n  var a=l.n,b=l.d,c=r.n,d=r.d;\n  return fraction(a*d + c*b, b*d);\n};\nFraction.minus = function(f) {\n  var n=f.n,d=f.d;\n  return fraction(-n, d);\n};\nFraction.mul = function(l, r) {\n  var a=l.n,b=l.d,c=r.n,d=r.d;\n  return fraction(a*c, b*d);\n};\nFraction.div = function(l, r) {\n  var a=l.n,b=l.d,c=r.n,d=r.d;\n  return fraction(a*d, b*c);\n};\nFraction.prototype = {\n  toFloat:  function() { return this.n/this.d; },\n  toString: function() { return this.d===1?(''+this.n):(this.n+'/'+this.d); }\n};\n\nreturn Fraction;\r\n\r\n}());\r\n\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}